const a0J=a0b;(function(a,b){const I=a0b,c=a();while(!![]){try{const d=-parseInt(I(0x1ec))/0x1+parseInt(I(0x1e3))/0x2+-parseInt(I(0x1c3))/0x3*(-parseInt(I(0x1eb))/0x4)+parseInt(I(0x1b8))/0x5*(-parseInt(I(0x1c6))/0x6)+-parseInt(I(0x1d0))/0x7+-parseInt(I(0x1a2))/0x8+parseInt(I(0x1d3))/0x9;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x8d541));import{connect}from'cloudflare:sockets';let a0c=a0J(0x1e4),a0d,a0e=a0J(0x1ba),a0f=[],a0g='https://www.cloudflare-cn.com/ips-v6/',a0h=0xa,a0i=[],a0j=![],a0k=![],a0l=a0J(0x1ac),a0m='2001:67c:2960:6464::',a0n=a0J(0x19b);export default{async 'fetch'(a,b){const K=a0J;a0c=b[K(0x1e6)]??a0c,a0d=a0y(),a0e=b[K(0x1d1)]??a0e,a0j=b[K(0x1b4)]??a0j,a0k=b[K(0x1c1)]??a0k,a0l=b[K(0x1d2)]??a0l,a0m=b[K(0x1f8)]??a0m,a0n=b[K(0x197)]??a0n;const c=new URL(a[K(0x1c9)]),d=a[K(0x1b2)][K(0x1e5)](K(0x1a9)),e=d==K(0x1c2),f=d?.['toLowerCase']()!==K(0x1c2),g='/'+encodeURIComponent(a0c)+'/';if(c['pathname'][K(0x1e8)](g)){let h=decodeURIComponent(c['pathname'][K(0x1bd)](g[K(0x1ae)]));try{const j=new Request(h+c[K(0x1df)],{'method':a[K(0x1cc)],'headers':a[K(0x1b2)],'body':a[K(0x1e1)]}),k=await fetch(j);return k;}catch{return new Response(null,{'status':0x194});}}if(f){if(c[K(0x1f4)]=='/'+encodeURIComponent(a0c)){const l=a['headers']['get'](K(0x1da))[K(0x1b5)](),m={'v2ray':a0F,'clash':a0G,'tips':a0z},n=Object['keys'](m)[K(0x1d6)](p=>l[K(0x19f)](p));a0f=await a0D();const o=m[n||'tips'];return await o(a[K(0x1b2)][K(0x1e5)]('Host'));}else return new Response(null,{'status':0x194});}if(e)return await a0o(a);}};async function a0o(a){const L=a0J,[b,c]=new WebSocketPair(),d=a[L(0x1b2)]['get'](L(0x1b6)),e=a0p(d);return await a0q(e,c),new Response(null,{'status':0x65,'webSocket':b});}function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x197;let f=c[d];return f;},a0b(a,b);}function a0p(a){const M=a0J;a=a[M(0x1ee)](/-/g,'+')[M(0x1ee)](/_/g,'/');const b=atob(a),c=Uint8Array[M(0x1b9)](b,d=>d[M(0x1c7)](0x0));return c[M(0x1b3)];}async function a0q(a,b,c){const N=a0J;if(a0t(new Uint8Array(a['slice'](0x1,0x11)))!==a0d)return null;const d=new Uint8Array(a)[0x11],e=0x12+d+0x1,f=a['slice'](e,e+0x2),g=new DataView(f)[N(0x1f2)](0x0),h=e+0x2,j=new Uint8Array(a[N(0x1bd)](h,h+0x1)),k=j[0x0];let l=0x0,m='',n=h+0x1;switch(k){case 0x1:l=0x4,m=new Uint8Array(a[N(0x1bd)](n,n+l))[N(0x198)]('.');break;case 0x2:l=new Uint8Array(a['slice'](n,n+0x1))[0x0],n+=0x1,m=new TextDecoder()[N(0x1c5)](a['slice'](n,n+l));break;case 0x3:l=0x10;const p=new DataView(a[N(0x1bd)](n,n+l)),q=[];for(let r=0x0;r<0x8;r++){q[N(0x1a6)](p['getUint16'](r*0x2)['toString'](0x10));}m=q['join'](':');break;}const o=a[N(0x1bd)](n+l);if(a0k&&a0j)try{c=await a0w(k,m,g),await c['opened'];}catch{try{c=await connect({'hostname':m,'port':g,'allowHalfOpen':!![]}),await c[N(0x1b0)];}catch{return new Response('连接失败',{'status':0x1f6});}}else try{c=await connect({'hostname':m,'port':g,'allowHalfOpen':!![]}),await c['opened'];}catch{if(a0j)try{c=await a0w(k,m,g),await c[N(0x1b0)];}catch{try{let [s,t]=a0l[N(0x1f6)](':');c=await connect({'hostname':s,'port':t||0x1bb}),await c[N(0x1b0)];}catch{try{const u=k===0x1?a0r(m):a0r(await a0s(m));c=await connect({'hostname':u,'port':g}),await c[N(0x1b0)];}catch{return new Response(N(0x1ce),{'status':0x1f6});}}}else try{let [v,w]=a0l['split'](':');c=await connect({'hostname':v,'port':w||0x1bb}),await c[N(0x1b0)];}catch{try{const x=k===0x1?a0r(m):a0r(await a0s(m));c=await connect({'hostname':x,'port':g}),await c['opened'];}catch{return new Response(N(0x1ce),{'status':0x1f6});}}}a0v(b,c,o);}function a0r(a){const O=a0J,b=a[O(0x1f6)]('.')[O(0x1de)](c=>(+c)[O(0x1ea)](0x10)['padStart'](0x2,'0'));return'['+a0m+b[0x0]+b[0x1]+':'+b[0x2]+b[0x3]+']';}async function a0s(a){const P=a0J,{Answer:b}=await(await fetch(P(0x1ed)+a0n+'/dns-query?name='+a+'&type=A',{'headers':{'Accept':'application/dns-json'}}))[P(0x1ad)]();return b[P(0x1d6)](({type:c})=>c===0x1)[P(0x19a)];}function a0t(a,b=0x0){const Q=a0J,c=(a0u[a[b+0x0]]+a0u[a[b+0x1]]+a0u[a[b+0x2]]+a0u[a[b+0x3]]+'-'+a0u[a[b+0x4]]+a0u[a[b+0x5]]+'-'+a0u[a[b+0x6]]+a0u[a[b+0x7]]+'-'+a0u[a[b+0x8]]+a0u[a[b+0x9]]+'-'+a0u[a[b+0xa]]+a0u[a[b+0xb]]+a0u[a[b+0xc]]+a0u[a[b+0xd]]+a0u[a[b+0xe]]+a0u[a[b+0xf]])[Q(0x1b5)]();return c;}const a0u=[];for(let a0H=0x0;a0H<0x100;++a0H){a0u[a0J(0x1a6)]((a0H+0x100)['toString'](0x10)[a0J(0x1bd)](0x1));}async function a0v(a,b,c){const R=a0J;a['accept'](),await a[R(0x1a7)](new Uint8Array([0x0,0x0])[R(0x1b3)]);const d=b[R(0x1f9)][R(0x1f0)](),e=b[R(0x1cb)][R(0x1a8)]();if(c)await d[R(0x1dd)](c);a[R(0x19c)]('message',async g=>{const S=R;await d[S(0x1dd)](g['data']);}),f(),((async()=>{const T=R;while(!![]){const {value:g,done:h}=await e['read']();if(h)break;if(g)await a[T(0x1a7)](g);}})());async function f(){const U=R;while(!![]){await new Promise(g=>setTimeout(g,0x2710)),d[U(0x1dd)](new Uint8Array(0x0)),a[U(0x1a7)]('');}}}async function a0w(a,b,c){const V=a0J,{username:d,password:e,hostname:f,port:g}=await a0x(a0j),h=connect({'hostname':f,'port':g});try{await h[V(0x1b0)];}catch{return new Response('SOCKS5未连通',{'status':0x190});}const j=h[V(0x1f9)][V(0x1f0)](),k=h[V(0x1cb)][V(0x1a8)](),l=new TextEncoder(),m=new Uint8Array([0x5,0x2,0x0,0x2]);await j[V(0x1dd)](m);let n=(await k[V(0x1a1)]())[V(0x1f7)];if(n[0x1]===0x2){if(!d||!e)return q();const r=new Uint8Array([0x1,d[V(0x1ae)],...l['encode'](d),e[V(0x1ae)],...l['encode'](e)]);await j[V(0x1dd)](r),n=(await k['read']())['value'];if(n[0x0]!==0x1||n[0x1]!==0x0)return q();}let o;switch(a){case 0x1:o=new Uint8Array([0x1,...b[V(0x1f6)]('.')['map'](Number)]);break;case 0x2:o=new Uint8Array([0x3,b[V(0x1ae)],...l['encode'](b)]);break;case 0x3:o=new Uint8Array([0x4,...b[V(0x1f6)](':')['flatMap'](s=>[parseInt(s[V(0x1bd)](0x0,0x2),0x10),parseInt(s[V(0x1bd)](0x2),0x10)])]);break;default:return q();}const p=new Uint8Array([0x5,0x1,0x0,...o,c>>0x8,c&0xff]);await j[V(0x1dd)](p),n=(await k[V(0x1a1)]())[V(0x1f7)];if(n[0x0]!==0x5||n[0x1]!==0x0)return q();j[V(0x1e2)](),k[V(0x1e2)]();return h;function q(){const W=V;return j[W(0x1e2)](),k[W(0x1e2)](),h['close'](),new Response(W(0x1c4),{'status':0x190});}}async function a0x(a){const X=a0J,[b,c]=a[X(0x1f6)]('@')[X(0x1a4)]();let d,e,f,g;if(c){const j=c['split'](':');d=j[0x0],e=j[0x1];}const h=b[X(0x1f6)](':');return g=Number(h['pop']()),f=h[X(0x198)](':'),{'username':d,'password':e,'hostname':f,'port':g};}function a0y(){const Y=a0J,a=Array[Y(0x1b9)](new TextEncoder()[Y(0x1f3)](a0c))[Y(0x1de)](d=>d[Y(0x1ea)](0x10)[Y(0x1ca)](0x2,'0'))[Y(0x198)]('')[Y(0x1bd)](0x0,0x14)[Y(0x1d5)](0x14,'0'),b=a[Y(0x1bd)](0x0,0x8),c=a[Y(0x1bd)](-0xc);return b+'-0000-4000-8000-'+c;}function a0a(){const ab=['toLowerCase','sec-websocket-protocol','&fp=chrome&type=ws&host=','5XLKDCP','from','https://raw.githubusercontent.com/ImLTHQ/edgetunnel/main/AutoTest.txt','节点\x20','\x0a<title>订阅-','slice','\x20\x20\x20\x20-\x20','\x0a-\x20name:\x20广告屏蔽\x0a\x20\x20type:\x20select\x0a\x20\x20proxies:\x0a\x20\x20\x20\x20-\x20REJECT\x0a\x20\x20\x20\x20-\x20DIRECT\x0a\x20\x20\x20\x20-\x20延迟优选\x0a\x20\x20\x20\x20-\x20故障转移\x0a','/?ed=2560','SOCKS5_GLOBAL','websocket','6efiqfR','SOCKS5握手失败','decode','3285126gAwywh','charCodeAt','proxyConfig','url','padStart','readable','method','error','连接失败','nodeConfig','914942IkXFcn','TXT_URL','PROXY_IP','18478485KKBNUP','text/plain;charset=utf-8','padEnd','find','filter','vless://','floor','User-Agent','\x0a\x0arules:\x0a\x20\x20-\x20GEOSITE,category-ads-all,广告屏蔽\x0a\x20\x20-\x20GEOSITE,cn,国内规则\x0a\x20\x20-\x20GEOIP,CN,国内规则,no-resolve\x0a\x20\x20-\x20MATCH,海外规则\x0a','</title>\x0a<style>\x0a\x20\x20body\x20{\x0a\x20\x20\x20\x20font-size:\x2025px;\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20}\x0a</style>\x0a<strong>请把链接导入\x20Clash\x20或\x20V2Ray</strong>\x0a','write','map','search','trim','body','releaseLock','838190vmFsvb','订阅路径','get','SUB_PATH','random','startsWith','获取IPv6地址段失败:','toString','972848EIFTUf','1055951ibpnti','https://','replace','#原生节点','getWriter','-\x20name:\x20','getUint16','encode','pathname','text','split','value','NAT64','writable','DOH','join','\x0a\x20\x20port:\x20','data','1.1.1.1','addEventListener','\x0a\x20\x20type:\x20vless\x0a\x20\x20server:\x20','\x0a-\x20name:\x20国内规则\x0a\x20\x20type:\x20select\x0a\x20\x20proxies:\x0a\x20\x20\x20\x20-\x20DIRECT\x0a\x20\x20\x20\x20-\x20延迟优选\x0a\x20\x20\x20\x20-\x20故障转移\x0a\x20\x20\x20\x20-\x20REJECT\x0a','includes','?encryption=none&security=tls&sni=','read','5165000YUOdxS','\x0a\x20\x20udp:\x20true\x0a\x20\x20tls:\x20true\x0a\x20\x20sni:\x20','reverse','\x0a\x20\x20network:\x20ws\x0a\x20\x20ws-opts:\x0a\x20\x20\x20\x20path:\x20\x22/?ed=2560\x22\x0a\x20\x20\x20\x20headers:\x0a\x20\x20\x20\x20\x20\x20Host:\x20','push','send','getReader','Upgrade','\x0a\x0aproxy-groups:\x0a-\x20name:\x20海外规则\x0a\x20\x20type:\x20select\x0a\x20\x20proxies:\x0a\x20\x20\x20\x20-\x20延迟优选\x0a\x20\x20\x20\x20-\x20故障转移\x0a\x20\x20\x20\x20-\x20DIRECT\x0a\x20\x20\x20\x20-\x20REJECT\x0a','\x0a-\x20name:\x20故障转移\x0a\x20\x20type:\x20fallback\x0a\x20\x20url:\x20https://www.google.com/generate_204\x0a\x20\x20interval:\x2030\x0a\x20\x20proxies:\x0a','proxyip.cmliussss.net','json','length','\x0a\x20\x20uuid:\x20','opened','\x0aproxies:\x0a','headers','buffer','SOCKS5'];a0a=function(){return ab;};return a0a();}async function a0z(){const Z=a0J,a=Z(0x1bc)+a0c+Z(0x1dc);return new Response(a,{'status':0xc8,'headers':{'Content-Type':'text/html;charset=utf-8'}});}async function a0A(){const a0=a0J;try{const a=await fetch(a0g),b=await a[a0(0x1f5)]();a0i=b['split']('\x0a')[a0(0x1d7)](c=>c[a0(0x1e0)]()!=='');}catch(c){console[a0(0x1cd)](a0(0x1e9),c),a0i=[];}}function a0B(a){const a1=a0J,b=a[a1(0x1f6)]('/')[0x0],c=[],d=b[a1(0x1f6)](':')[a1(0x1d7)](e=>e!=='');for(let e=d[a1(0x1ae)];e<0x8;e++){c[a1(0x1a6)](Math[a1(0x1d9)](Math[a1(0x1e7)]()*0x10000)[a1(0x1ea)](0x10)[a1(0x1ca)](0x4,'0'));}return[...d,...c][a1(0x198)](':');}async function a0C(){const a2=a0J;a0i['length']===0x0&&await a0A();const a=[];for(let b=0x0;b<a0h&&a0i[a2(0x1ae)]>0x0;b++){const c=a0i[Math[a2(0x1d9)](Math[a2(0x1e7)]()*a0i[a2(0x1ae)])],d=a0B(c);a[a2(0x1a6)](d+'#IPv6随机地址\x20'+(b+0x1));}return a;}async function a0D(){const a3=a0J;if(a0e){const a=await fetch(a0e),b=await a[a3(0x1f5)]();return b[a3(0x1f6)]('\x0a')[a3(0x1de)](c=>c[a3(0x1e0)]())[a3(0x1d7)](c=>c);}return[];}async function a0E(a,b){const a4=a0J,c=[b+a4(0x1ef),...a],d=await a0C(),e=[...c,...d];return e[a4(0x1de)]((f,g)=>{const a5=a4,[h,j=a5(0x1bb)+(g+0x1)]=f[a5(0x1f6)]('#'),k=h[a5(0x1f6)](':'),l=k[a5(0x1ae)]>0x1&&!isNaN(k[k['length']-0x1])?Number(k['pop']()):0x1bb,m=k[a5(0x198)](':');return{'地址':m,'端口':l,'节点名字':j};});}async function a0F(a){const a6=a0J,b=await a0E(a0f,a),c=b[a6(0x1de)](({地址:d,端口:e,节点名字:f})=>{const a7=a6;return a7(0x1d8)+a0d+'@'+d+':'+e+a7(0x1a0)+a+a7(0x1b7)+a+'&path='+encodeURIComponent(a7(0x1c0))+'#'+f;})[a6(0x198)]('\x0a');return new Response(c,{'status':0xc8,'headers':{'Content-Type':a6(0x1d4)}});}async function a0G(a){const aa=a0J,b=await a0E(a0f,a),c=g=>{const a8=a0b;return g[a8(0x1de)](({地址:h,端口:j,节点名字:k})=>{const a9=a8;return{'nodeConfig':a9(0x1f1)+k+a9(0x19d)+h+a9(0x199)+j+a9(0x1af)+a0d+a9(0x1a3)+a+a9(0x1a5)+a+'\x0a\x20\x20\x20\x20\x20\x20User-Agent:\x20Chrome','proxyConfig':a9(0x1be)+k};});},d=c(b)[aa(0x1de)](g=>g[aa(0x1cf)])[aa(0x198)]('\x0a'),e=c(b)[aa(0x1de)](g=>g[aa(0x1c8)])[aa(0x198)]('\x0a'),f=aa(0x1b1)+d+aa(0x1aa)+e+aa(0x19e)+e+aa(0x1bf)+e+'\x0a-\x20name:\x20延迟优选\x0a\x20\x20type:\x20url-test\x0a\x20\x20url:\x20https://www.google.com/generate_204\x0a\x20\x20interval:\x2030\x0a\x20\x20tolerance:\x2050\x0a\x20\x20proxies:\x0a'+e+aa(0x1ab)+e+aa(0x1db);return new Response(f,{'status':0xc8,'headers':{'Content-Type':'text/plain;charset=utf-8'}});}