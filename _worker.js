const a0x=a0b;(function(a,b){const w=a0b,c=a();while(!![]){try{const d=parseInt(w(0x14a))/0x1+parseInt(w(0x181))/0x2+parseInt(w(0x18d))/0x3*(-parseInt(w(0x167))/0x4)+parseInt(w(0x15d))/0x5*(parseInt(w(0x197))/0x6)+parseInt(w(0x16a))/0x7+-parseInt(w(0x14e))/0x8+-parseInt(w(0x18e))/0x9;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a0a,0x4d191));import{connect}from'cloudflare:sockets';let a0c='订阅',a0d,a0e=a0x(0x182),a0f=[];export default{async 'fetch'(a,b){const y=a0x;a0c=b[y(0x17b)]??a0c,a0d=a0o(),a0e=b[y(0x184)]??a0e;const c=a['headers'][y(0x186)](y(0x14c)),d=c==y(0x189),e=c?.[y(0x199)]()!==y(0x189),f=new URL(a[y(0x196)]);if(e){if(f[y(0x16c)]=='/'+encodeURIComponent(a0c)){const g=a[y(0x191)][y(0x186)]('User-Agent')[y(0x199)](),h={'v2ray':a0t,'clash':a0u,'tips':a0p},j=Object['keys'](h)[y(0x174)](l=>g[y(0x14b)](l));a0f=await a0r();const k=h[j||y(0x18c)];return k(a[y(0x191)][y(0x186)](y(0x175)));}else return a0q();}if(d)return await a0g(a);}};async function a0g(a){const z=a0x,[b,c]=new WebSocketPair(),d=a['headers']['get'](z(0x176)),e=a0h(d);return await a0i(e,c),new Response(null,{'status':0x65,'webSocket':b});}function a0h(a){const A=a0x;a=a['replace'](/-/g,'+')[A(0x16b)](/_/g,'/');const b=atob(a),c=Uint8Array[A(0x17f)](b,d=>d[A(0x15c)](0x0));return c[A(0x151)];}async function a0i(a,b,c){const B=a0x;if(a0l(new Uint8Array(a[B(0x193)](0x1,0x11)))!==a0d)return null;const d=new Uint8Array(a)[0x11],e=0x12+d+0x1,f=a[B(0x193)](e,e+0x2),g=new DataView(f)[B(0x179)](0x0),h=e+0x2,j=new Uint8Array(a['slice'](h,h+0x1)),k=j[0x0];let l=0x0,m='',n=h+0x1;switch(k){case 0x1:l=0x4,m=new Uint8Array(a[B(0x193)](n,n+l))[B(0x14f)]('.');break;case 0x2:l=new Uint8Array(a[B(0x193)](n,n+0x1))[0x0],n+=0x1,m=new TextDecoder()[B(0x17c)](a[B(0x193)](n,n+l));break;case 0x3:l=0x10;const p=new DataView(a[B(0x193)](n,n+l)),q=[];for(let r=0x0;r<0x8;r++){q[B(0x14d)](p[B(0x179)](r*0x2)[B(0x158)](0x10));}m=q['join'](':');break;}const o=a[B(0x193)](n+l);try{c=await connect({'hostname':m,'port':g}),await c[B(0x168)];}catch{const s=k===0x1?a0j(m):a0j(await a0k(m));c=await connect({'hostname':s,'port':g});}a0n(b,c,o);}function a0j(a){const C=a0x,b=a[C(0x155)]('.');if(b[C(0x18a)]!==0x4)throw new Error(C(0x15a));const c=b[C(0x150)](d=>{const D=C,e=parseInt(d,0xa);if(e<0x0||e>0xff)throw new Error(D(0x170));return e[D(0x158)](0x10)['padStart'](0x2,'0');});return'[2001:67c:2960:6464::'+c[0x0]+c[0x1]+':'+c[0x2]+c[0x3]+']';}async function a0k(a){const E=a0x;try{const b=await fetch('https://1.1.1.1/dns-query?name='+a+E(0x177),{'headers':{'Accept':'application/dns-json'}}),c=await b[E(0x192)]();if(c['Answer']&&c[E(0x198)]['length']>0x0){const d=c[E(0x198)][E(0x174)](e=>e['type']===0x1);if(d)return d[E(0x154)];}throw new Error(E(0x152));}catch(e){throw new Error(E(0x16f)+e['message']);}}function a0b(a,b){const c=a0a();return a0b=function(d,e){d=d-0x14a;let f=c[d];return f;},a0b(a,b);}function a0a(){const T=['slice','\x0a\x0arules:\x0a\x20\x20-\x20GEOSITE,category-ads-all,REJECT\x0a\x20\x20-\x20GEOSITE,cn,DIRECT\x0a\x20\x20-\x20GEOIP,CN,DIRECT,no-resolve\x0a\x20\x20-\x20MATCH,🚀\x20节点选择\x0a','/?ed=2560','url','12uxtELy','Answer','toLowerCase','proxyConfig','writable','597357gdJJTs','includes','Upgrade','push','1382864eAjbGg','join','map','buffer','无法解析域名的IPv4地址','\x0a-\x20name:\x20♻️\x20延迟优选\x0a\x20\x20type:\x20url-test\x0a\x20\x20url:\x20https://www.google.com/generate_204\x0a\x20\x20interval:\x20500\x0a\x20\x20tolerance:\x20300\x0a\x20\x20proxies:\x0a','data','split','\x0a\x20\x20type:\x20vless\x0a\x20\x20server:\x20','text','toString','pop','无效的IPv4地址','&fp=chrome&type=ws&host=','charCodeAt','168715OTEOjG','\x0a\x0aproxy-groups:\x0a-\x20name:\x20🚀\x20节点选择\x0a\x20\x20type:\x20select\x0a\x20\x20proxies:\x0a\x20\x20\x20\x20-\x20♻️\x20延迟优选\x0a','-\x20name:\x20','getWriter','text/html;charset=utf-8','?encryption=none&security=tls&sni=','unshift','padStart','\x0a\x20\x20network:\x20ws\x0a\x20\x20ws-opts:\x0a\x20\x20\x20\x20path:\x20\x22/?ed=2560\x22\x0a\x20\x20\x20\x20headers:\x0a\x20\x20\x20\x20\x20\x20Host:\x20','encode','1324PMmQdN','opened','send','107660HHMxOW','replace','pathname','trim','message','DNS解析失败:\x20','无效的IPv4地址段','</title>\x0a<style>\x0a\x20\x20body\x20{\x0a\x20\x20\x20\x20font-size:\x2025px;\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20}\x0a</style>\x0a<strong>请把链接导入\x20Clash\x20或\x20V2Ray</strong>\x0a','read','\x0a\x20\x20uuid:\x20','find','Host','sec-websocket-protocol','&type=A','-0000-4000-8000-','getUint16','addEventListener','SUB_PATH','decode','accept','write','from','text/plain;charset=utf-8','1180522pndpjQ','https://raw.githubusercontent.com/ImLTHQ/edgetunnel/main/randomIP.txt','getReader','TXT_URL','filter','get','节点\x20','\x0a\x20\x20\x20\x20\x20\x20User-Agent:\x20Chrome','websocket','length','请输入正确的订阅路径','tips','3066NjmULN','3991959pRbdWe','readable','&path=','headers','json'];a0a=function(){return T;};return a0a();}function a0l(a,b=0x0){const c=(a0m[a[b+0x0]]+a0m[a[b+0x1]]+a0m[a[b+0x2]]+a0m[a[b+0x3]]+'-'+a0m[a[b+0x4]]+a0m[a[b+0x5]]+'-'+a0m[a[b+0x6]]+a0m[a[b+0x7]]+'-'+a0m[a[b+0x8]]+a0m[a[b+0x9]]+'-'+a0m[a[b+0xa]]+a0m[a[b+0xb]]+a0m[a[b+0xc]]+a0m[a[b+0xd]]+a0m[a[b+0xe]]+a0m[a[b+0xf]])['toLowerCase']();return c;}const a0m=[];for(let a0v=0x0;a0v<0x100;++a0v){a0m[a0x(0x14d)]((a0v+0x100)[a0x(0x158)](0x10)[a0x(0x193)](0x1));}async function a0n(a,b,c){const F=a0x;a[F(0x17d)](),await a[F(0x169)](new Uint8Array([0x0,0x0])['buffer']);const d=b[F(0x19b)][F(0x160)](),e=b[F(0x18f)][F(0x183)]();if(c)await d[F(0x17e)](c);a[F(0x17a)](F(0x16e),async f=>{const G=F;await d[G(0x17e)](f['data']);}),((async()=>{const H=F;while(!![]){const {value:f,done:g}=await e[H(0x172)]();if(g)break;if(f)await a[H(0x169)](f);}})());}function a0o(){const I=a0x,a=Array[I(0x17f)](new TextEncoder()[I(0x166)](a0c))[I(0x150)](d=>d[I(0x158)](0x10)[I(0x164)](0x2,'0'))[I(0x14f)]('')[I(0x193)](0x0,0x14)['padEnd'](0x14,'0'),b=a[I(0x193)](0x0,0x8),c=a[I(0x193)](-0xc);return b+I(0x178)+c;}async function a0p(){const J=a0x,a='\x0a<title>订阅-'+a0c+J(0x171);return new Response(a,{'status':0xc8,'headers':{'Content-Type':J(0x161)}});}function a0q(){const K=a0x,a=K(0x18b);return new Response(a,{'status':0xc8,'headers':{'Content-Type':K(0x180)}});}async function a0r(){const L=a0x;if(a0e){const a=await fetch(a0e),b=await a[L(0x157)]();return b['split']('\x0a')[L(0x150)](c=>c[L(0x16d)]())[L(0x185)](c=>c);}return[];}function a0s(a,b){const M=a0x;return a[M(0x163)](b),a[M(0x150)]((c,d)=>{const N=M,[e,f=N(0x187)+(d+0x1)]=c['split']('#'),g=e[N(0x155)](':'),h=g['length']>0x1?Number(g[N(0x159)]()):0x1bb,j=g[N(0x14f)](':');return{'地址':j,'端口':h,'节点名字':f};});}function a0t(a){const O=a0x,b=a0s(a0f,a),c=b[O(0x150)](({地址:d,端口:e,节点名字:f})=>{const P=O;return'vless://'+a0d+'@'+d+':'+e+P(0x162)+a+P(0x15b)+a+P(0x190)+encodeURIComponent(P(0x195))+'#'+f;})[O(0x14f)]('\x0a');return new Response(c,{'status':0xc8,'headers':{'Content-Type':O(0x180)}});}function a0u(a){const S=a0x,b=a0s(a0f,a),c=g=>{const Q=a0b;return g[Q(0x150)](({地址:h,端口:j,节点名字:k})=>{const R=Q;return{'nodeConfig':R(0x15f)+k+R(0x156)+h+'\x0a\x20\x20port:\x20'+j+R(0x173)+a0d+'\x0a\x20\x20udp:\x20true\x0a\x20\x20tls:\x20true\x0a\x20\x20sni:\x20'+a+R(0x165)+a+R(0x188),'proxyConfig':'\x20\x20\x20\x20-\x20'+k};});},d=c(b)['map'](g=>g['nodeConfig'])[S(0x14f)]('\x0a'),e=c(b)[S(0x150)](g=>g[S(0x19a)])[S(0x14f)]('\x0a'),f='\x0aproxies:\x0a'+d+S(0x15e)+e+S(0x153)+e+S(0x194);return new Response(f,{'status':0xc8,'headers':{'Content-Type':'text/plain;charset=utf-8'}});}